<!-- pages/index/index.wxml -->
<view>
  <view class="search-container">
    <!-- 左边筛选+搜索区域 -->
    <view class="search-box">
      <picker class="filter-picker" mode="selector" range="{{filterList}}" value="{{filterIndex}}" bindchange="onFilterChange">
        <text class="filter-text">{{filterList[filterIndex]}}</text>
        
      </picker>
      <image src="/image/share.png"></image>
      <input 
        class="search-input" 
        placeholder="搜索" 
        placeholder-class="placeholder-style"
        confirm-type="search"
        bindconfirm="onSearch"
      />
    </view>
    <!-- 右边通知图标 -->
    <view class="notification">
      <image src="/image/message.png" class="notification-icon"/>
      <view class="badge" wx:if="{{hasNotification}}"></view>
    </view>
  </view>

  <view class="container">
    <!-- 动态列表 -->
    <view class="content-list">
      <!-- 遍历 -->  
      <view class="row" wx:for="{{dataList}}" wx:key="index">
        <!-- 动态卡片 -->
        <view class="post-card">
          <!-- 用户信息 -->
          <view class="user-info">
            <image class="avatar" src="{{item.data.avatar_url}}"></image>
            <text class="username">{{item.data.name}}</text>
            <text class="follow-status">已关注</text>
            <image class="image-sx" src="/image/comment.png"></image>
          </view>

          <!-- 动态内容 -->
          <view class="post-content">
            <text>{{item.content}}</text>
            <!-- <view class="container">
              <view class="grid">
                <block wx:for="{{item.fileIds}}" wx:for-item="imageItem" wx:key="index">
                  <image class="grid-item" src="{{imageItem}}" mode="aspectFill"></image>
                </block>
              </view>
            </view> -->
          </view>
          <view class="grid-container">
            <block wx:for="{{item.fileIds}}" wx:for-item="imageItem" wx:key="index">
              <view class="grid-item">
                <image src="{{imageItem}}" mode="aspectFill"></image>
              </view>
            </block>
          </view>

          <!-- 互动区域 -->
          <view class="interaction">
            <text class="time">{{item.create_time}}</text>
            <view class="like">
              <image class="icon" src="/image/ilove.png" wx:if="{{userInfo.includes(item._id)}}"></image>
              <text>{{item.likes}}</text>
            </view>
            <view class="comment">
              <image class="icon" src="/image/comment-icon.png"></image>
              <text>评论</text>
            </view>
          </view>

          <!-- 评论区 -->
          <view class="comment-section"  wx:for="{{item.comment}}" wx:for-item="commentItem" wx:key="index">
            <view class="comment-item">
              <text class="comment-user">{{commentItem.userName}}：</text>
              <text>{{commentItem.content}}</text>
            </view>
          </view>
        </view>
      </view>
    </view>
  </view>
</view>