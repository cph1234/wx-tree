<!--pages/home/post_tree/post.wxml-->
<view class="container">
  <!-- 第一部分：选择树木 -->
  <view class="section">
    <picker bindchange="bindTreeChange" value="{{index}}" range="{{trees}}">
      <view class="picker">当前选择：{{selectedTree || '请选择树种'}}</view>
    </picker>
    
    <!-- 树木信息展示 -->
    <view class="info-box">

      <!-- 第一行：树木定位 -->
      <view class="info-row single-line">
        <view class="info-item full-width">
          <text class="label">树木定位</text>
          <text class="value">宁波市海曙区</text>
        </view>
      </view>

        <!-- 第二行：海拔高度 + 日照情况 -->
      <view class="info-row">
        <view class="info-item">
          <text class="label">海拔高度</text>
          <text class="value">3.6米</text>
        </view>
        <view class="info-item">
          <text class="label">日照情况</text>
          <text class="value">全日照</text>
        </view>
      </view>

      <!-- 第三行：土壤类型 + 天气情况 -->
      <view class="info-row">
        <view class="info-item">
          <text class="label">土壤类型</text>
          <text class="value">壤土</text>
        </view>
        <view class="info-item">
          <text class="label">天气情况</text>
          <text class="value">晴 25°C</text>
        </view>
      </view>

      <!-- 第四行：树木规格 -->
      <view class="info-row">
        <view class="info-item">
          <text class="label">树木规格</text>
          <text class="value">胸径 10cm 树高 900m 冠幅 34cm</text>
        </view>
      </view>
    </view>
  </view>

  <!-- 第二部分：发布树友圈 -->
  <view class="section">
    
      <!-- 操作按钮 -->
      <view class="custom-btns">
        <view class="btn-container" bindtap="publishMoment">
          <image src="/image/btn_bg.png" class="btn-bg" mode="widthFix"/>
          <text class="btn-text-active">发布树友圈</text>
        </view>
        <view class="btn-container" bindtap="submitWork">
          <text class="btn-text">交作业</text>
        </view>
      </view>

    <textarea 
      class="textarea" 
      placeholder="在这里写下你的观察内容吧" 
      maxlength="100" 
      bindinput="bindTextAreaInput"
    ></textarea>
    <view class="word-count">{{wordCount}}/100</view>

    <!-- 分类上传区域 -->
    <view class="upload-section">
      <view class="upload-item">
        <view class="add-btn">
        <text>+ \n \n 周边环境</text>
        </view>
      </view>
      <view class="upload-item">
        <view class="add-btn">
        <text>+ \n \n 整株树形</text>
        </view>
      </view>
      <view class="upload-item">
        <view class="add-btn">
        <text>+ \n \n 根茎</text>
        </view>
      </view>
      <view class="upload-item">
        <view class="add-btn">
        <text>+ \n \n 树叶</text>
        </view>
      </view>
      <view class="upload-item">
        <view class="add-btn">
        <text>+ \n \n 花(含孢子)</text>
        </view>
      </view>
      <view class="upload-item">
        <view class="add-btn">
        <text>+ \n \n 果(含种子)</text>
        </view>
      </view>
      <view class="upload-item">
        <view class="add-btn">
        <text>+ \n \n 树栖动物</text>
        </view>
      </view>
      <view class="upload-item">
        <view class="add-btn">
        <text>+ \n \n 树生植物</text>
        </view>
      </view>
      <view class="upload-item">
        <view class="add-btn">
        <text>+ \n \n 病虫害</text>
        </view>
      </view>
      <view class="upload-item">
        <view class="add-btn">
        <text>+ \n \n 特殊性状</text>
        </view>
      </view>
      <view class="upload-item">
        <view class="add-btn">
        <text>+ \n \n 人文资料</text>
        </view>
      </view>
      <view class="upload-item">
        <view class="add-btn">
        <text>+ \n \n 其他</text>
        </view>
      </view>
    </view>

    <view class="upload-bottom">
      <view class="note-word">*最多选9张发树友圈</view>
      <view class="sync-option">
      <checkbox checked="{{syncToHomework}}" bindtap="toggleSync"/>
      <text class="sync-word">同步照片至交作业</text>
    </view>
    </view>
  </view>

  <!-- 第三部分：发布按钮 -->
  <view class="publish-btn" bindtap="handlePublish">
    一键发布树友圈
  </view>
</view>